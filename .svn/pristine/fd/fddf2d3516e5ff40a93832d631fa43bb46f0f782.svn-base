<?php
/**
 * Created by PhpStorm.
 * User: joy
 * Date: 18-5-30
 * Time: 下午6:56
 */

namespace app\common\model\lazada;

use app\common\model\Goods;
use app\common\traits\ModelFilter;
use erp\ErpModel;
use think\db\Query;

class LazadaProduct extends ErpModel
{
    use ModelFilter;

    protected function initialize()
    {
        parent::initialize(); // TODO: Change the autogenerated stub
    }

    /**
     * listing过滤
     * @param Query $query
     * @param $params
     */
    public function scopeListing(Query $query, $params)
    {

        if(!empty($params))
        {
            $query->where('__TABLE__.account_id','in',$params);
        }
    }

    public function goods()
    {
        return $this->hasOne(Goods::class,'id','goods_id');

    }

    public function variant()
    {
        return $this->hasMany(LazadaVariant::class,'pid','id');

    }

    public function productAttribute()
    {
        return $this->hasMany(LazadaProductAttribute::class,'pid','id');

    }

    public function productInfo()
    {
        return $this->hasOne(LazadaProductInfo::class,'pid','id');

    }

}